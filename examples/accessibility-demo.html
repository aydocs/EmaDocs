<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adiox Accessibility Demo - WCAG 2.1 AA Compliance</title>
  <link rel="stylesheet" href="../css/adiox.css">
  <style>
    .demo-section {
      margin: 3rem 0;
      padding: 2rem;
      border: 1px solid var(--adi-border);
      border-radius: var(--adi-radius);
    }
    
    .contrast-demo {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .contrast-box {
      padding: 2rem;
      text-align: center;
      border-radius: var(--adi-radius);
    }
    
    .focus-demo button {
      margin: 0.5rem;
    }
  </style>
</head>
<body>
  <a href="#main-content" class="adi-skip-link">Skip to main content</a>

  <adi-navbar brand="Adiox A11y Demo" sticky>
    <a href="../index.html" slot="nav">Home</a>
    <a href="components.html" slot="nav">Components</a>
    <a href="accessibility-demo.html" slot="nav" aria-current="page">Accessibility</a>
  </adi-navbar>

  <main id="main-content" class="adi-container" style="padding: 3rem 0;">
    <h1 class="adi-text-4xl adi-font-bold adi-mb-4">Accessibility Features</h1>
    <p class="adi-text-lg adi-text-secondary adi-mb-8">
      Demonstrating WCAG 2.1 AA compliance and accessibility best practices.
    </p>

    <!-- Keyboard Navigation -->
    <section class="demo-section">
      <h2 class="adi-text-2xl adi-font-bold adi-mb-4">Keyboard Navigation</h2>
      <p class="adi-mb-4">All interactive elements are keyboard accessible. Try using Tab, Shift+Tab, Enter, and Space keys.</p>
      
      <div class="focus-demo">
        <adi-button variant="primary">Button 1</adi-button>
        <adi-button variant="secondary">Button 2</adi-button>
        <adi-button variant="outline">Button 3</adi-button>
        
        <adi-dropdown>
          <adi-button slot="trigger" variant="outline">Dropdown Menu</adi-button>
          <div slot="content">
            <a href="#option1">Option 1</a>
            <a href="#option2">Option 2</a>
            <a href="#option3">Option 3</a>
          </div>
        </adi-dropdown>
      </div>
    </section>

    <!-- Focus Management -->
    <section class="demo-section">
      <h2 class="adi-text-2xl adi-font-bold adi-mb-4">Focus Management</h2>
      <p class="adi-mb-4">Modals and dialogs trap focus and restore it when closed.</p>
      
      <adi-button id="openA11yModal" variant="primary">Open Accessible Modal</adi-button>
    </section>

    <!-- Screen Reader Support -->
    <section class="demo-section">
      <h2 class="adi-text-2xl adi-font-bold adi-mb-4">Screen Reader Support</h2>
      <p class="adi-mb-4">All components include proper ARIA labels, roles, and live regions.</p>
      
      <div class="adi-flex adi-gap-4">
        <adi-button id="announceSuccess" variant="success">Announce Success</adi-button>
        <adi-button id="announceError" variant="danger">Announce Error</adi-button>
      </div>
      
      <div id="adi-live-region" role="status" aria-live="polite" aria-atomic="true" class="adi-sr-only"></div>
    </section>

    <!-- Color Contrast -->
    <section class="demo-section">
      <h2 class="adi-text-2xl adi-font-bold adi-mb-4">Color Contrast (WCAG AA)</h2>
      <p class="adi-mb-4">All text meets WCAG AA contrast requirements (4.5:1 for normal text, 3:1 for large text).</p>
      
      <div class="contrast-demo">
        <div class="contrast-box" style="background: #3b82f6; color: white;">
          <strong>Primary</strong>
          <p>Contrast: 4.5:1+</p>
        </div>
        
        <div class="contrast-box" style="background: #16a34a; color: white;">
          <strong>Success</strong>
          <p>Contrast: 4.5:1+</p>
        </div>
        
        <div class="contrast-box" style="background: #dc2626; color: white;">
          <strong>Danger</strong>
          <p>Contrast: 4.5:1+</p>
        </div>
        
        <div class="contrast-box" style="background: #f9fafb; color: #1a1a1a; border: 1px solid #e5e7eb;">
          <strong>Light</strong>
          <p>Contrast: 16:1+</p>
        </div>
      </div>
    </section>

    <!-- Form Accessibility -->
    <section class="demo-section">
      <h2 class="adi-text-2xl adi-font-bold adi-mb-4">Form Accessibility</h2>
      <p class="adi-mb-4">Forms include proper labels, error messages, and validation feedback.</p>
      
      <form class="adi-grid adi-grid-cols-1 md:adi-grid-cols-2 adi-gap-4" id="a11yForm">
        <adi-input 
          label="Full Name" 
          type="text" 
          required
          helper="Enter your first and last name"
          aria-describedby="name-helper"
        ></adi-input>
        
        <adi-input 
          label="Email Address" 
          type="email" 
          required
          helper="We'll never share your email"
        ></adi-input>
        
        <div class="md:adi-col-span-2">
          <adi-button type="submit" variant="primary">Submit Form</adi-button>
        </div>
      </form>
    </section>

    <!-- Reduced Motion -->
    <section class="demo-section">
      <h2 class="adi-text-2xl adi-font-bold adi-mb-4">Reduced Motion Support</h2>
      <p class="adi-mb-4">
        Animations respect the <code>prefers-reduced-motion</code> media query.
        <br>
        Current preference: <strong id="motionPreference">Loading...</strong>
      </p>
      
      <adi-button id="testAnimation" variant="primary">Test Animation</adi-button>
      <div id="animationTarget" style="width: 100px; height: 100px; background: var(--adi-primary); margin-top: 1rem; border-radius: var(--adi-radius);"></div>
    </section>
  </main>

  <!-- Load Framework -->
  <script src="../js/core.js"></script>
  <script src="../js/router.js"></script>
  <script src="../js/store.js"></script>
  <script src="../js/ui.js"></script>
  <script src="../js/animations.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../js/i18n.js"></script>
  <script src="../js/theme.js"></script>
  <script src="../js/accessibility.js"></script>
  <script src="../js/adiox.js"></script>

  <!-- Load Components -->
  <script src="../components/adi-button.js"></script>
  <script src="../components/adi-navbar.js"></script>
  <script src="../components/adi-dropdown.js"></script>
  <script src="../components/adi-input.js"></script>
  <script src="../components/adi-modal.js"></script>

  <script>
    // Initialize
    Adiox.init();

    // Add skip link
    Adiox.A11y.addSkipLink("main-content");

    // Modal demo
    document.getElementById("openA11yModal")?.addEventListener("click", async () => {
      await Adiox.UI.modal({
        title: "Accessible Modal",
        content: "This modal traps focus and can be closed with the Escape key. Try using Tab to navigate between buttons.",
        confirmText: "Got it",
        showCancel: true
      });
    });

    // Screen reader announcements
    document.getElementById("announceSuccess")?.addEventListener("click", () => {
      Adiox.A11y.announce("Operation completed successfully!", "polite");
      Adiox.UI.toast("Success announced to screen readers", "success");
    });

    document.getElementById("announceError")?.addEventListener("click", () => {
      Adiox.A11y.announce("An error occurred. Please try again.", "assertive");
      Adiox.UI.toast("Error announced to screen readers", "error");
    });

    // Motion preference
    const prefersReduced = Adiox.A11y.prefersReducedMotion();
    document.getElementById("motionPreference").textContent = 
      prefersReduced ? "Reduced motion enabled" : "No preference";

    // Animation test
    document.getElementById("testAnimation")?.addEventListener("click", () => {
      const target = document.getElementById("animationTarget");
      const duration = prefersReduced ? 0 : 500;
      
      Adiox.Animations.animate(target, "bounce", { duration });
    });

    // Form validation
    document.getElementById("a11yForm")?.addEventListener("submit", (e) => {
      e.preventDefault();
      Adiox.A11y.announce("Form submitted successfully", "polite");
      Adiox.UI.toast("Form validation passed!", "success");
    });
  </script>
</body>
</html>
